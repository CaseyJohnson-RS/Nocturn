# Инфраструктура PostgreSQL

Эта директория содержит настройки инфраструктуры для баз данных PostgreSQL, используемых в проекте Nocturn. Включает инициализационные скрипты для создания необходимых ролей и баз данных.

## Обзор

Настройка предоставляет две основные базы данных:
- `auth`: Для сервиса аутентификации
- `notes`: Для сервиса заметок

Каждая база данных имеет своего выделенного пользователя с соответствующими правами.

## Конфигурация

1. Скопируйте пример файла окружения:
   ```bash
   cp .env.db.example .env.db
   ```

2. Отредактируйте `.env.db`, чтобы установить желаемые пароли и конфигурацию.

Файл окружения содержит:
- `POSTGRES_USER`: Административный пользователь для PostgreSQL
- `POSTGRES_PASSWORD`: Пароль для административного пользователя
- `AUTH_DB_USER`: Пользователь для базы данных auth
- `AUTH_DB_PASSWORD`: Пароль для пользователя базы данных auth
- `NOTES_DB_USER`: Пользователь для базы данных notes
- `NOTES_DB_PASSWORD`: Пароль для пользователя базы данных notes

## Инициализация

При первом запуске контейнера инициализационные скрипты в директории `init/` выполнят:
1. Создание необходимых ролей пользователей
2. Создание баз данных `auth` и `notes` с соответствующими владельцами

## Файлы

- `.env.db.example`: Пример файла переменных окружения
- `.gitignore`: Игнорирует файлы окружения, кроме примера
- `init/01_create_roles.sh`: Скрипт для создания ролей пользователей
- `init/02_create_dbs.sh`: Скрипт для создания баз данных
- `.env.db.example`: Example environment file
- `init/01_create_roles.sh`: Script to create database roles
- `init/02_create_dbs.sh`: Script to create databases
